<!DOCTYPE HTML>
<html lang="fr" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Vérifications - doc-api</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">DOC API</li><li class="chapter-item expanded "><a href="../auth/auth.html"><strong aria-hidden="true">1.</strong> API Authentification</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../auth/index.html"><strong aria-hidden="true">1.1.</strong> Authetification</a></li><li class="chapter-item expanded "><a href="../auth/medecin.html"><strong aria-hidden="true">1.2.</strong> Medecin</a></li><li class="chapter-item expanded "><a href="../auth/usager.html"><strong aria-hidden="true">1.3.</strong> Usager</a></li></ol></li><li class="chapter-item expanded "><a href="../app/app.html"><strong aria-hidden="true">2.</strong> API Application</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../app/medecins.html"><strong aria-hidden="true">2.1.</strong> Médecins</a></li><li class="chapter-item expanded "><a href="../app/usagers.html"><strong aria-hidden="true">2.2.</strong> Usagers</a></li><li class="chapter-item expanded "><a href="../app/consultations.html"><strong aria-hidden="true">2.3.</strong> Consultations</a></li><li class="chapter-item expanded "><a href="../app/statistiques.html"><strong aria-hidden="true">2.4.</strong> Statistiques</a></li><li class="chapter-item expanded "><a href="../app/check.html" class="active"><strong aria-hidden="true">2.5.</strong> Vérifications</a></li></ol></li><li class="chapter-item expanded "><a href="../code_source.html"><strong aria-hidden="true">3.</strong> Code Source</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">doc-api</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="vérifications"><a class="header" href="#vérifications">Vérifications</a></h1>
<p>Répertoire de toute les vérifications pouvant être effectué pour chaque requete.</p>
<p>Si une vérification passe avec succès rien n'est renvoyé. On reçoit un message d'erreur dans le cas contraire.</p>
<br>
<h2 id="méthode"><a class="header" href="#méthode">Méthode</a></h2>
<details open>
<summary style="font-size: 1.5em; font-weight: bold; transform: translateY(23px);">
</summary>
<br>
<p>Chaque route détient une liste de  méthodes autorisée. Cette vérification est la première effectuée à chaque requête.</p>
<h3 id="--response---405"><a class="header" href="#--response---405">- Response - <em>405</em></a></h3>
<p><strong>Header :</strong></p>
<pre><code class="language-yaml">Content-Type : application/json
</code></pre>
<p><strong>Body :</strong></p>
<pre><code class="language-json">{
    "status": "error",
    "status_code": 405,
    "status_message": "[R405 REST AUTH] : Methodes utilisées non autorisées"
}
</code></pre>
<br>
</details>
<hr />
<h2 id="argument"><a class="header" href="#argument">Argument</a></h2>
<details open>
<summary style="font-size: 1.5em; font-weight: bold; transform: translateY(23px);">
</summary>
<br>
<p>Utilisé quand la requete attend un argument que ca soit un <code>{id}</code> ou un nom de fonction tel que <code>{usager}</code> (pour les statistiques).</p>
<h3 id="--response---400"><a class="header" href="#--response---400">- Response - <em>400</em></a></h3>
<p><strong>Header :</strong></p>
<pre><code class="language-yaml">Content-Type : application/json
</code></pre>
<p><strong>Body :</strong></p>
<pre><code class="language-json">{
    "status": "error",
    "status_code": 400,
    "status_message": "[R400 REST API] : Aucun argument n'a été fourni"
}
</code></pre>
<br>
</details>
<hr />
<h2 id="roles"><a class="header" href="#roles">Roles</a></h2>
<details open>
<summary style="font-size: 1.5em; font-weight: bold; transform: translateY(23px);">
</summary>
<br>
<p>Sachant que toutes les requêtes necessite un token, on vérifie à chacune d'entre elles les roles autorisés à effectuer la requête.</p>
<h3 id="--response---403"><a class="header" href="#--response---403">- Response - <em>403</em></a></h3>
<p><strong>Header :</strong></p>
<pre><code class="language-yaml">Content-Type : application/json
</code></pre>
<p><strong>Body :</strong></p>
<pre><code class="language-json">{
    "status": "error",
    "status_code": 403,
    "status_message": "[R403 REST AUTH] : Rôle non autorisé à effectuer cette action."
}
</code></pre>
<br>
</details>
<hr />
<h2 id="jeton"><a class="header" href="#jeton">Jeton</a></h2>
<details open>
<summary style="font-size: 1.5em; font-weight: bold; transform: translateY(23px);">
</summary>
<br>
<p>Verifie si le jeton est présent dans le header d'autorisation et si ce dernier est valide.
La vérification de la validité est effectuée coté serveur d'authentification et l'erreur de validité est retournée coté serveur application.</p>
<h3 id="--response---401"><a class="header" href="#--response---401">- Response - <em>401</em></a></h3>
<p><strong>Header :</strong></p>
<pre><code class="language-yaml">Content-Type : application/json
</code></pre>
<p><strong>Body :</strong></p>
<pre><code class="language-json">{
    "status": "error",
    "status_code": 401,
    "status_message": "[401 REST AUTH] : Jeton requis."
}
</code></pre>
<h3 id="--response---401-1"><a class="header" href="#--response---401-1">- Response - <em>401</em></a></h3>
<p><strong>Header :</strong></p>
<pre><code class="language-yaml">Content-Type : application/json
</code></pre>
<p><strong>Body :</strong></p>
<pre><code class="language-json">{
    "status": "error",
    "status_code": 401,
    "status_message": "[401 REST AUTH] : Jeton invalide."
}
</code></pre>
<br>
</details>
<hr />
<h2 id="données-nécessaires"><a class="header" href="#données-nécessaires">Données Nécessaires</a></h2>
<details open>
<summary style="font-size: 1.5em; font-weight: bold; transform: translateY(23px);">
</summary>
<br>
<p>A partir des données passées en corps, vérifie si touts les champs nécessaires sont présents (surtout pour les requêtes de création).</p>
<h3 id="--response---400-1"><a class="header" href="#--response---400-1">- Response - <em>400</em></a></h3>
<p><strong>Header :</strong></p>
<pre><code class="language-yaml">Content-Type : application/json
</code></pre>
<p><strong>Body :</strong></p>
<pre><code class="language-json">{
    "status": "error",
    "status_code": 400,
    "status_message": "[R400 REST API] : Le champ &lt;champs&gt; est requis"
}
</code></pre>
<br>
</details>
<hr />
<h2 id="données-autorisées"><a class="header" href="#données-autorisées">Données Autorisées</a></h2>
<details open>
<summary style="font-size: 1.5em; font-weight: bold; transform: translateY(23px);">
</summary>
<br>
<p>A partir des données passées en corps, vérifie si touts les champs sont autorisés (surtout pour les requêtes de modification).</p>
<h3 id="--response---400-2"><a class="header" href="#--response---400-2">- Response - <em>400</em></a></h3>
<p><strong>Header :</strong></p>
<pre><code class="language-yaml">Content-Type : application/json
</code></pre>
<p><strong>Body :</strong></p>
<pre><code class="language-json">{
    "status": "error",
    "status_code": 400,
    "status_message": "[R400 REST API] : Le champ &lt;champs&gt; n'est pas autorisé"
}
</code></pre>
<br>
</details>
<hr />
<h2 id="element-existe"><a class="header" href="#element-existe">Element Existe</a></h2>
<details open>
<summary style="font-size: 1.5em; font-weight: bold; transform: translateY(23px);">
</summary>
<br>
<p>Utilisé pour vérifier à partir d'un ID si un element existe (en fonction de si la requête est faites pour un médecin, un usager ou une consultations).</p>
<h3 id="--response---404"><a class="header" href="#--response---404">- Response - <em>404</em></a></h3>
<p><strong>Header :</strong></p>
<pre><code class="language-yaml">Content-Type : application/json
</code></pre>
<p><strong>Body :</strong></p>
<pre><code class="language-json">{
    "status": "error",
    "status_code": 404,
    "status_message": "[R404 REST API] : Aucun &lt;element&gt; avec l'ID &lt;id&gt; n'a été trouvé"
}
</code></pre>
<br>
</details>
<hr />
<h2 id="contrôle-daccès"><a class="header" href="#contrôle-daccès">Contrôle d'Accès</a></h2>
<details open>
<summary style="font-size: 1.5em; font-weight: bold; transform: translateY(23px);">
</summary>
<br>
<p>Certaines données ne peuvent être visualisée, modifiée ou supprimée uniquement par un administrateur, une secretaire ou leur propriétaire.
On vérifie donc en fonction du role actuel de l'utilisateur si il à le droit d'efffectuer l'action demandée.</p>
<p>De ce fait, un médecin ne pourras par exemple que modifier ses rendez-vous ou alors un usager ne pourras pas visualiser les informations des autres usagers. Voir les <a href="app.html#tables-dacc%C3%A8s">tables d'accès</a></p>
<h3 id="--response---403-1"><a class="header" href="#--response---403-1">- Response - <em>403</em></a></h3>
<p><strong>Header :</strong></p>
<pre><code class="language-yaml">Content-Type : application/json
</code></pre>
<p><strong>Body :</strong></p>
<pre><code class="language-json">{
    "status": "error",
    "status_code": 403,
    "status_message": "[R403 REST API] : Vous n'avez pas le droit de visualiser/modifier/supprimer cet &lt;élement&gt;"
}
</code></pre>
<br>
</details>
<hr />
<h2 id="type-argument-string"><a class="header" href="#type-argument-string">Type argument string</a></h2>
<details open>
<summary style="font-size: 1.5em; font-weight: bold; transform: translateY(23px);">
</summary>
<br>
<p>Utilisé pour vérifier le type d'argument que l'on attend est une <code>string</code>.</p>
<h3 id="--response---400-3"><a class="header" href="#--response---400-3">- Response - <em>400</em></a></h3>
<p><strong>Header :</strong></p>
<pre><code class="language-yaml">Content-Type : application/json
</code></pre>
<p><strong>Body :</strong></p>
<pre><code class="language-json">{
    "status": "error",
    "status_code": 400,
    "status_message": "[R400 REST] : L\'argument doit être une chaine de caractère"
}
</code></pre>
<br>
</details>
<hr />
<h2 id="type-argument-int"><a class="header" href="#type-argument-int">Type argument int</a></h2>
<details open>
<summary style="font-size: 1.5em; font-weight: bold; transform: translateY(23px);">
</summary>
<br>
<p>Utilisé pour vérifier le type d'argument que l'on attend est un <code>int</code> (pour les <code>{id}</code>). Impose une taille limite de <code>2147483647</code>.</p>
<h3 id="--response---400-4"><a class="header" href="#--response---400-4">- Response - <em>400</em></a></h3>
<p><strong>Header :</strong></p>
<pre><code class="language-yaml">Content-Type : application/json
</code></pre>
<p><strong>Body :</strong></p>
<pre><code class="language-json">{
    "status": "error",
    "status_code": 400,
    "status_message": "[R400 REST] : L\'identifiant doit être un entier positif non null"
}
</code></pre>
<h3 id="--response---400-5"><a class="header" href="#--response---400-5">- Response - <em>400</em></a></h3>
<p><strong>Header :</strong></p>
<pre><code class="language-yaml">Content-Type : application/json
</code></pre>
<p><strong>Body :</strong></p>
<pre><code class="language-json">{
    "status": "error",
    "status_code": 400,
    "status_message": "[R400 REST] : L\'identifiant doit être un entier inférieur à 2147483647"
}
</code></pre>
<br>
</details>
<hr />
<h2 id="date"><a class="header" href="#date">Date</a></h2>
<details open>
<summary style="font-size: 1.5em; font-weight: bold; transform: translateY(23px);">
</summary>
<br>
<p>Utilisé pour vérifier si une date est inférieure (date de naissance) ou supèrieur (rendez-vous) à la date actuelle.</p>
<h3 id="--response---400-6"><a class="header" href="#--response---400-6">- Response - <em>400</em></a></h3>
<p><strong>Header :</strong></p>
<pre><code class="language-yaml">Content-Type : application/json
</code></pre>
<p><strong>Body :</strong></p>
<pre><code class="language-json">{
    "status": "error",
    "status_code": 400,
    "status_message": "[R400 REST API] : La date &lt;date_parametre&gt; est invalide car elle est inferieure/supérieure à la date actuelle"
}
</code></pre>
<br>
</details>
<hr />
<h2 id="civilité"><a class="header" href="#civilité">Civilité</a></h2>
<details open>
<summary style="font-size: 1.5em; font-weight: bold; transform: translateY(23px);">
</summary>
<br>
<p>Vérifie si la civilité est valide. Celle ci doit être soit <code>M.</code> soit <code>Mme.</code>.</p>
<h3 id="--response---400-7"><a class="header" href="#--response---400-7">- Response - <em>400</em></a></h3>
<p><strong>Header :</strong></p>
<pre><code class="language-yaml">Content-Type : application/json
</code></pre>
<p><strong>Body :</strong></p>
<pre><code class="language-json">{
    "status": "error",
    "status_code": 400,
    "status_message": "[R400 REST API] : La civilité doit être soit 'M.' soit 'Mme'"
}
</code></pre>
<br>
</details>
<hr />
<h2 id="sexe"><a class="header" href="#sexe">Sexe</a></h2>
<details open>
<summary style="font-size: 1.5em; font-weight: bold; transform: translateY(23px);">
</summary>
<br>
<p>Vérifie si le sexe est valide. Celui-ci doit être soit <code>H</code> soit <code>F</code>.</p>
<h3 id="--response---400-8"><a class="header" href="#--response---400-8">- Response - <em>400</em></a></h3>
<p><strong>Header :</strong></p>
<pre><code class="language-yaml">Content-Type : application/json
</code></pre>
<p><strong>Body :</strong></p>
<pre><code class="language-json">{
    "status": "error",
    "status_code": 400,
    "status_message": "[R400 REST API] : Le sexe doit être soit 'H' soit 'F'"
}
</code></pre>
<br>
</details>
<hr />
<h2 id="sécurité-sociale"><a class="header" href="#sécurité-sociale">Sécurité sociale</a></h2>
<details open>
<summary style="font-size: 1.5em; font-weight: bold; transform: translateY(23px);">
</summary>
<br>
<p>Vérifie si le numéro de sécurité sociale est disponible.</p>
<h3 id="--response---400-9"><a class="header" href="#--response---400-9">- Response - <em>400</em></a></h3>
<p><strong>Header :</strong></p>
<pre><code class="language-yaml">Content-Type : application/json
</code></pre>
<p><strong>Body :</strong></p>
<pre><code class="language-json">{
    "status": "error",
    "status_code": 400,
    "status_message": "[R400 REST API] :  Le numéro de sécurité sociale &lt;numéro&gt; est déjà utilisé"
}
</code></pre>
<br>
</details>
<hr />

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../app/statistiques.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../code_source.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../app/statistiques.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../code_source.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
